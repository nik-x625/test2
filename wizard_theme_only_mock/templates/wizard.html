<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ template.name }} - SoW Wizard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script src="https://unpkg.com/htmx.org@1.9.6"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>{{ template.name }}</h1>
            <p>Customize your document</p>
            <div class="progress-bar">
                <div class="progress" id="wizard-progress" style="width: 0%"></div>
            </div>
        </header>
        
        <main>
            <form id="sow-form" hx-post="{{ url_for('preview') }}" hx-target="#preview-container" hx-swap="innerHTML">
                <input type="hidden" name="template_id" value="{{ template._id }}">
                
                <div class="wizard-container">
                    <div class="wizard-sidebar">
                        <h3>Document Sections</h3>
                        <ul class="section-list">
                            {% for section in template.sections %}
                            <li>
                                <div class="section-checkbox">
                                    <input type="checkbox" id="section-{{ section.id }}" name="included_sections" value="{{ section.id }}" 
                                        {% if section.required %}checked disabled{% endif %}
                                        hx-get="{{ url_for('get_section', template_id=template._id, section_id=section.id) }}"
                                        hx-target="#section-editor"
                                        hx-trigger="click, load delay:100ms">
                                    <label for="section-{{ section.id }}">{{ section.title }}</label>
                                    {% if section.required %}<span class="required-badge">Required</span>{% endif %}
                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    
                    <div class="wizard-content">
                        <div id="section-editor" class="section-editor">
                            <div class="placeholder-message">
                                <p>Select a section from the sidebar to edit its content</p>
                            </div>
                        </div>
                        
                        <div class="wizard-actions">
                            <button type="submit" class="btn btn-primary">Preview Document</button>
                        </div>
                    </div>
                </div>
            </form>
            
            <div id="preview-container" class="preview-container"></div>
        </main>
        
        <footer>
            <p>&copy; 2025 SoW Wizard</p>
        </footer>
    </div>
    
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
