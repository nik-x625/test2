<div class="preview-document">
    <div class="preview-header">
        <h2>Document Preview</h2>
        <form hx-post="{{ url_for('export_pdf') }}" method="POST">
            <input type="hidden" name="template_id" value="{{ template._id }}">
            {% for section in sections %}
                <input type="hidden" name="included_sections" value="{{ section.id }}">
            {% endfor %}
            
            <!-- Pass all field values from the form -->
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.getElementById('sow-form');
                    const inputs = form.querySelectorAll('input[type="text"]');
                    
                    inputs.forEach(input => {
                        if (input.value) {
                            const hiddenInput = document.createElement('input');
                            hiddenInput.type = 'hidden';
                            hiddenInput.name = input.name;
                            hiddenInput.value = input.value;
                            document.currentScript.parentNode.appendChild(hiddenInput);
                        }
                    });
                });
            </script>
            
            <button type="submit" class="btn btn-success">Export to PDF</button>
        </form>
    </div>
    
    <div class="document-content">
        <h1>{{ template.name }}</h1>
        
        {% for section in sections %}
        <div class="document-section">
            <h2>{{ section.title }}</h2>
            <div class="section-content">
                {{ section.content|safe }}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
